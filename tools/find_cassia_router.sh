#!/bin/bash

cat << 'EOF'

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘              ðŸ” æŸ¥æ‰¾Cassiaè·¯ç”±å™¨IPåœ°å€                            â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

EOF

echo "ã€æ–¹æ³•1ï¼šæ‰«æ192.168.40.xç½‘æ®µã€‘"
echo "æ‰«æå¯èƒ½çš„IPåœ°å€..."

# å¸¸è§çš„è·¯ç”±å™¨IP
for ip in 1 100 254; do
    echo -n "  å°è¯• 192.168.40.$ip ... "
    timeout 0.5 ping -c 1 192.168.40.$ip > /dev/null 2>&1
    if [ $? -eq 0 ]; then
        echo "âœ“ åœ¨çº¿"
        
        # å°è¯•è®¿é—®HTTP
        HTTP_RESULT=$(timeout 1 curl -s -o /dev/null -w "%{http_code}" "http://192.168.40.$ip" 2>/dev/null)
        if [ -n "$HTTP_RESULT" ] && [ "$HTTP_RESULT" != "000" ]; then
            echo "    â†’ HTTPå“åº”: $HTTP_RESULT"
            echo "    â†’ å¯èƒ½æ˜¯è·¯ç”±å™¨ï¼"
        fi
    else
        echo "âœ—"
    fi
done
echo ""

echo "ã€æ–¹æ³•2ï¼šæ£€æŸ¥DHCPå®¢æˆ·ç«¯æ—¥å¿—ã€‘"
if [ -f /var/lib/dhcp/dhclient.leases ]; then
    echo "DHCPç§Ÿçº¦ä¿¡æ¯:"
    grep -A 5 "enP8p1s0" /var/lib/dhcp/dhclient.leases 2>/dev/null | head -10
else
    echo "  æ— DHCPç§Ÿçº¦æ–‡ä»¶"
fi
echo ""

echo "ã€æ–¹æ³•3ï¼šå°è¯•ä»Žè·¯ç”±å™¨èŽ·å–DHCPã€‘"
echo "å°è¯•é€šè¿‡DHCPè‡ªåŠ¨èŽ·å–IP..."
sudo dhclient -v enP8p1s0 2>&1 | head -20 &
DHCP_PID=$!
sleep 3
sudo kill $DHCP_PID 2>/dev/null

echo ""
echo "æ–°çš„IPé…ç½®:"
ip addr show enP8p1s0 | grep inet
echo ""

echo "ã€æ–¹æ³•4ï¼šä½¿ç”¨nmapæ‰«æï¼ˆå¦‚æžœå·²å®‰è£…ï¼‰ã€‘"
if command -v nmap &> /dev/null; then
    echo "nmapå¿«é€Ÿæ‰«æ..."
    sudo nmap -sn 192.168.40.0/24 2>/dev/null | grep -B 2 "Host is up"
else
    echo "  nmapæœªå®‰è£…ï¼Œè·³è¿‡"
fi
echo ""

echo "ã€æ–¹æ³•5ï¼šç›‘å¬ç½‘ç»œæµé‡ã€‘"
echo "ç›‘å¬enP8p1s0ä¸Šçš„æµé‡ï¼ˆ5ç§’ï¼‰..."
echo "å¦‚æžœè·¯ç”±å™¨æœ‰ä»»ä½•å¹¿æ’­ï¼Œä¼šæ˜¾ç¤ºåœ¨è¿™é‡Œ..."
timeout 5 sudo tcpdump -i enP8p1s0 -n 2>/dev/null | head -20 &
TCPDUMP_PID=$!
sleep 5
echo ""

cat << 'EOF'

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘              å¸¸è§Cassiaè·¯ç”±å™¨é…ç½®                                 â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


é»˜è®¤IPåœ°å€ï¼ˆå‡ºåŽ‚è®¾ç½®ï¼‰
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

å¸¸è§IP:
  â€¢ 192.168.40.1    (æœ€å¸¸è§)
  â€¢ 192.168.1.1
  â€¢ 192.168.0.1
  â€¢ 10.10.10.1


Webç®¡ç†ç•Œé¢
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

é»˜è®¤ç”¨æˆ·å/å¯†ç :
  â€¢ admin / admin
  â€¢ cassia / cassia
  â€¢ ç©ºå¯†ç 


å»ºè®®
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. æŸ¥çœ‹è·¯ç”±å™¨æ ‡ç­¾æˆ–è¯´æ˜Žä¹¦
2. å°è¯•é€šè¿‡å…¶ä»–è®¾å¤‡ï¼ˆç¬”è®°æœ¬ï¼‰ç›´è¿žè·¯ç”±å™¨
3. ä½¿ç”¨è·¯ç”±å™¨é…ç½®å·¥å…·ï¼ˆå¦‚æžœæœ‰ï¼‰
4. æ¢å¤å‡ºåŽ‚è®¾ç½®ï¼ˆæŒ‰å¤ä½é”®ï¼‰


å¦‚æžœæ‰¾åˆ°äº†è·¯ç”±å™¨IP
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ä¿®æ”¹é…ç½®è„šæœ¬ä¸­çš„IPåœ°å€ï¼Œç„¶åŽé‡æ–°è¿è¡Œï¼š

nano é…ç½®Cassiaç½‘ç»œ-å®Œæ•´ç‰ˆ.sh
# ä¿®æ”¹: ROUTER_IP="æ‰¾åˆ°çš„IP"

æˆ–ç›´æŽ¥è¿è¡Œç³»ç»Ÿæ—¶æŒ‡å®šIPï¼š

python3 python_apps/tensorrt_yolo_inference.py \
    ../20211216-101333.mp4 \
    --engine models/yolov11_host.engine \
    --cassia-local "æ‰¾åˆ°çš„IP"

EOF


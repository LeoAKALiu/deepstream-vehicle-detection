# å·¥ç¨‹æœºæ¢°å®æ—¶è¯†åˆ«ç³»ç»Ÿ - é¡¹ç›®æ–‡æ¡£

## ğŸ“‹ ç›®å½•

1. [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
2. [ç³»ç»Ÿæ¶æ„](#ç³»ç»Ÿæ¶æ„)
3. [ä»£ç ç»“æ„](#ä»£ç ç»“æ„)
4. [åŠŸèƒ½æ¨¡å—è¯¦è§£](#åŠŸèƒ½æ¨¡å—è¯¦è§£)
5. [å¼€å‘è¿›åº¦](#å¼€å‘è¿›åº¦)
6. [é…ç½®æ–‡ä»¶è¯´æ˜](#é…ç½®æ–‡ä»¶è¯´æ˜)
7. [ä½¿ç”¨æŒ‡å—](#ä½¿ç”¨æŒ‡å—)
8. [æŠ€æœ¯æ ˆ](#æŠ€æœ¯æ ˆ)
9. [å·²çŸ¥é—®é¢˜ä¸ä¼˜åŒ–æ–¹å‘](#å·²çŸ¥é—®é¢˜ä¸ä¼˜åŒ–æ–¹å‘)
10. [æµ‹è¯•ä¸éªŒè¯](#æµ‹è¯•ä¸éªŒè¯)

---

## é¡¹ç›®æ¦‚è¿°

### é¡¹ç›®åç§°
**å·¥ç¨‹æœºæ¢°å®æ—¶è¯†åˆ«ç³»ç»Ÿ** (Construction Vehicle Real-time Detection System)

### é¡¹ç›®ç›®æ ‡
å¼€å‘ä¸€å¥—åŸºäºæ·±åº¦å­¦ä¹ å’Œä¼ æ„Ÿå™¨èåˆçš„å®æ—¶è½¦è¾†è¯†åˆ«ç³»ç»Ÿï¼Œèƒ½å¤Ÿï¼š
- å®æ—¶æ£€æµ‹å’Œåˆ†ç±»å·¥ç¨‹è½¦è¾†ï¼ˆæŒ–æ˜æœºã€æ¨åœŸæœºã€è£…è½½æœºç­‰ï¼‰å’Œç¤¾ä¼šè½¦è¾†
- é€šè¿‡BLEä¿¡æ ‡è¯†åˆ«å·²å¤‡æ¡ˆçš„å·¥ç¨‹è½¦è¾†
- é€šè¿‡è½¦ç‰Œè¯†åˆ«è¯†åˆ«ç¤¾ä¼šè½¦è¾†
- æµ‹é‡è½¦è¾†è·ç¦»ï¼ˆæ·±åº¦ç›¸æœºï¼‰
- è®°å½•å’ŒæŠ¥è­¦æœªå¤‡æ¡ˆè½¦è¾†

### åº”ç”¨åœºæ™¯
- å»ºç­‘å·¥åœ°è½¦è¾†ç®¡ç†
- æ–½å·¥ç°åœºå®‰å…¨ç›‘æ§
- è½¦è¾†è¿›å‡ºåœºç®¡ç†
- å®æ—¶å®‰å…¨é¢„è­¦

### ç¡¬ä»¶å¹³å°
- **ä¸»æ§è®¾å¤‡**: NVIDIA Jetson (ARM64æ¶æ„)
- **æ·±åº¦ç›¸æœº**: Orbbec Gemini 335L
- **è“ç‰™è·¯ç”±å™¨**: Cassia X1000/X2000
- **æ“ä½œç³»ç»Ÿ**: Linux (Ubuntu 20.04/22.04)

---

## ç³»ç»Ÿæ¶æ„

### æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ä¸»ç¨‹åº (test_system_realtime.py)         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚TensorRT  â”‚  â”‚ByteTrack â”‚  â”‚Cassia    â”‚  â”‚Orbbec    â”‚  â”‚
â”‚  â”‚æ¨ç†å¼•æ“  â”‚  â”‚è·Ÿè¸ªå™¨    â”‚  â”‚BLEå®¢æˆ·ç«¯ â”‚  â”‚æ·±åº¦ç›¸æœº  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚       â”‚              â”‚              â”‚              â”‚       â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                      â”‚              â”‚                       â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚              â”‚     BeaconFilter            â”‚              â”‚
â”‚              â”‚   (ä¿¡æ ‡æ™ºèƒ½è¿‡æ»¤å™¨)          â”‚              â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                      â”‚                                      â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚              â”‚  HyperLPR3 (è½¦ç‰Œè¯†åˆ«) â”‚                      â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â”‚ å…±äº«å¸§ç¼“å†²åŒº
                          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           å½•åˆ¶è„šæœ¬ (record_field_test.py)                  â”‚
â”‚              - RGBè§†é¢‘å½•åˆ¶                                 â”‚
â”‚              - æ·±åº¦è§†é¢‘å½•åˆ¶                                â”‚
â”‚              - å…ƒæ•°æ®è®°å½•                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ•°æ®æµ

1. **å›¾åƒé‡‡é›†**: Orbbecç›¸æœº â†’ RGB + æ·±åº¦å¸§
2. **ç›®æ ‡æ£€æµ‹**: RGBå¸§ â†’ TensorRT â†’ æ£€æµ‹æ¡† + ç±»åˆ«
3. **ç›®æ ‡è·Ÿè¸ª**: æ£€æµ‹æ¡† â†’ ByteTrack â†’ è·Ÿè¸ªID
4. **è½¦è¾†è¯†åˆ«**:
   - å·¥ç¨‹è½¦è¾† â†’ Cassia BLEæ‰«æ â†’ BeaconFilter â†’ åŒ¹é…ç»“æœ
   - ç¤¾ä¼šè½¦è¾† â†’ HyperLPR3 â†’ è½¦ç‰Œå·
5. **æ·±åº¦æµ‹é‡**: æ·±åº¦å¸§ â†’ è½¦è¾†ROI â†’ è·ç¦»è®¡ç®—
6. **ç»“æœè¾“å‡º**: æ£€æµ‹æ¡†ç»˜åˆ¶ + æŠ¥è­¦è®°å½• + è§†é¢‘å½•åˆ¶

---

## ä»£ç ç»“æ„

### ç›®å½•ç»“æ„

```
deepstream-vehicle-detection/
â”œâ”€â”€ test_system_realtime.py          # ä¸»ç¨‹åºå…¥å£ï¼ˆ1058è¡Œï¼‰
â”œâ”€â”€ config.yaml                      # ç»Ÿä¸€é…ç½®æ–‡ä»¶
â”œâ”€â”€ beacon_whitelist.yaml            # BLEä¿¡æ ‡ç™½åå•
â”‚
â”œâ”€â”€ python_apps/                     # Pythonæ ¸å¿ƒæ¨¡å—
â”‚   â”œâ”€â”€ tensorrt_yolo_inference.py  # TensorRTæ¨ç†å¼•æ“
â”‚   â”œâ”€â”€ byte_tracker.py             # ByteTrackè·Ÿè¸ªç®—æ³•
â”‚   â”œâ”€â”€ cassia_local_client.py      # Cassia BLEå®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ beacon_filter.py            # ä¿¡æ ‡æ™ºèƒ½è¿‡æ»¤å™¨
â”‚   â”œâ”€â”€ orbbec_depth.py             # Orbbecæ·±åº¦ç›¸æœºæ¥å£
â”‚   â”œâ”€â”€ config_loader.py            # é…ç½®åŠ è½½å™¨
â”‚   â”œâ”€â”€ record_field_test.py        # è§†é¢‘å½•åˆ¶è„šæœ¬
â”‚   â””â”€â”€ test_orbbec.py              # ç›¸æœºæµ‹è¯•è„šæœ¬
â”‚
â”œâ”€â”€ models/                          # æ¨¡å‹æ–‡ä»¶
â”‚   â”œâ”€â”€ custom_yolo.engine          # è‡ªå®šä¹‰YOLOv11å¼•æ“
â”‚   â”œâ”€â”€ yolov11.engine              # æ ‡å‡†YOLOv11å¼•æ“
â”‚   â””â”€â”€ yolov11_host.engine         # ä¸»æœºç‰ˆå¼•æ“
â”‚
â”œâ”€â”€ config/                          # DeepStreamé…ç½®ï¼ˆå¤‡ç”¨ï¼‰
â”‚   â”œâ”€â”€ config_infer_yolov11.txt
â”‚   â”œâ”€â”€ config_tracker_NvDCF_accuracy.yml
â”‚   â””â”€â”€ labels.txt
â”‚
â”œâ”€â”€ scripts/                         # å·¥å…·è„šæœ¬
â”‚   â”œâ”€â”€ install_deepstream.sh
â”‚   â”œâ”€â”€ prepare_tensorrt.sh
â”‚   â””â”€â”€ check_deepstream.sh
â”‚
â”œâ”€â”€ recordings/                      # å½•åˆ¶æ–‡ä»¶ç›®å½•
â”‚   â””â”€â”€ field_test_YYYYMMDD_HHMMSS/
â”‚       â”œâ”€â”€ rgb_video.mp4
â”‚       â”œâ”€â”€ depth_video.mp4
â”‚       â””â”€â”€ metadata.json
â”‚
â””â”€â”€ *.sh                            # å¯åŠ¨å’Œæµ‹è¯•è„šæœ¬
    â”œâ”€â”€ start_field_test_display.sh
    â”œâ”€â”€ start_field_test_with_recording.sh
    â”œâ”€â”€ test_realtime_system.sh
    â”œâ”€â”€ check_cassia.sh
    â””â”€â”€ fix_cassia_connection.sh
```

### æ ¸å¿ƒæ–‡ä»¶è¯´æ˜

#### 1. `test_system_realtime.py` (ä¸»ç¨‹åº)
- **è¡Œæ•°**: 1058è¡Œ
- **åŠŸèƒ½**: ç³»ç»Ÿä¸»å…¥å£ï¼Œæ•´åˆæ‰€æœ‰æ¨¡å—
- **ä¸»è¦ç±»**:
  - `TensorRTInference`: TensorRTæ¨ç†å¼•æ“å°è£…
  - `VehicleTracker`: è½¦è¾†è·Ÿè¸ªå™¨ï¼ˆSimple IoU / ByteTrackï¼‰
  - `VehicleDetectionSystem`: ä¸»ç³»ç»Ÿç±»

#### 2. `python_apps/tensorrt_yolo_inference.py`
- **åŠŸèƒ½**: TensorRTå¼•æ“åŠ è½½å’Œæ¨ç†
- **ç‰¹æ€§**: 
  - æ”¯æŒTensorRT 8.xå’Œ10.x
  - åŠ¨æ€è¾“å…¥å°ºå¯¸
  - NMSåå¤„ç†
  - é¢å¤–IoUè¿‡æ»¤ï¼ˆå‡å°‘é‡å¤æ£€æµ‹ï¼‰

#### 3. `python_apps/byte_tracker.py`
- **åŠŸèƒ½**: ByteTrackå¤šç›®æ ‡è·Ÿè¸ªç®—æ³•
- **ç‰¹æ€§**:
  - å‘é‡åŒ–IoUè®¡ç®—ï¼ˆNumPyä¼˜åŒ–ï¼‰
  - åŒˆç‰™åˆ©ç®—æ³•åŒ¹é…ï¼ˆscipyä¼˜åŒ–ï¼‰
  - æ”¯æŒé«˜/ä½ç½®ä¿¡åº¦æ£€æµ‹
  - è·Ÿè¸ªçŠ¶æ€ç®¡ç†

#### 4. `python_apps/cassia_local_client.py`
- **åŠŸèƒ½**: Cassiaè“ç‰™è·¯ç”±å™¨å®¢æˆ·ç«¯
- **ç‰¹æ€§**:
  - SSEæµå¼æ‰«æ
  - å¼‚æ­¥äº‹ä»¶å¤„ç†
  - RSSIåˆ°è·ç¦»è½¬æ¢
  - ä¿¡æ ‡ç¼“å­˜ç®¡ç†

#### 5. `python_apps/beacon_filter.py`
- **åŠŸèƒ½**: ä¿¡æ ‡æ™ºèƒ½è¿‡æ»¤å™¨
- **ç‰¹æ€§**:
  - å¤šçº§è¿‡æ»¤ï¼ˆRSSIã€è·ç¦»ã€æ—¶é—´çª—å£ï¼‰
  - ç½®ä¿¡åº¦è®¡ç®—
  - æœ€ä½³åŒ¹é…é€‰æ‹©
  - ç™½åå•ç®¡ç†

#### 6. `python_apps/orbbec_depth.py`
- **åŠŸèƒ½**: Orbbecæ·±åº¦ç›¸æœºå°è£…
- **ç‰¹æ€§**:
  - RGB + æ·±åº¦åŒæ­¥é‡‡é›†
  - æ·±åº¦å€¼è½¬æ¢ï¼ˆæ¯«ç±³â†’ç±³ï¼‰
  - æ— æ•ˆå€¼è¿‡æ»¤
  - å¸§å…±äº«æœºåˆ¶

#### 7. `python_apps/config_loader.py`
- **åŠŸèƒ½**: ç»Ÿä¸€é…ç½®ç®¡ç†
- **ç‰¹æ€§**:
  - YAMLé…ç½®åŠ è½½
  - è·¯å¾„è§£æ
  - é…ç½®éªŒè¯
  - é»˜è®¤å€¼å¤„ç†

---

## åŠŸèƒ½æ¨¡å—è¯¦è§£

### 1. ç›®æ ‡æ£€æµ‹æ¨¡å—

**æŠ€æœ¯æ ˆ**: YOLOv11 + TensorRT

**åŠŸèƒ½**:
- å®æ—¶æ£€æµ‹10ç±»è½¦è¾†ï¼ˆæŒ–æ˜æœºã€æ¨åœŸæœºã€å‹è·¯æœºã€è£…è½½æœºã€è‡ªå¸è½¦ã€æ··å‡åœŸæ…æ‹Œè½¦ã€æ³µè½¦ã€å¡è½¦ã€èµ·é‡æœºã€å°æ±½è½¦ï¼‰
- GPUåŠ é€Ÿæ¨ç†ï¼ˆTensorRT FP16ï¼‰
- NMSåå¤„ç†
- é¢å¤–IoUè¿‡æ»¤ï¼ˆå‡å°‘é™æ€å›¾åƒé‡å¤æ£€æµ‹ï¼‰

**å…³é”®å‚æ•°**:
- `conf_threshold`: 0.7ï¼ˆæ£€æµ‹ç½®ä¿¡åº¦é˜ˆå€¼ï¼‰
- `iou_threshold`: 0.5ï¼ˆNMS IoUé˜ˆå€¼ï¼‰

**æ€§èƒ½**: 
- **å½“å‰å®æµ‹**: 15-25 FPS @ 1080p (Jetson, å…¨åŠŸèƒ½æ¨¡å¼)
- **ç›®æ ‡æ€§èƒ½**: 50+ FPS @ 720p (æ€§èƒ½æ¨¡å¼)
- æ¨¡å‹å¤§å°: ~54MB (FP16)

### 2. ç›®æ ‡è·Ÿè¸ªæ¨¡å—

**æŠ€æœ¯æ ˆ**: ByteTrack / Simple IoU Tracker

**åŠŸèƒ½**:
- å¤šç›®æ ‡è·Ÿè¸ªï¼ˆä¿æŒIDä¸€è‡´æ€§ï¼‰
- è½¨è¿¹é¢„æµ‹
- é®æŒ¡å¤„ç†
- æ¶ˆå¤±ç›®æ ‡æ¢å¤

**ByteTrackå‚æ•°**:
- `track_thresh`: 0.6ï¼ˆè·Ÿè¸ªé˜ˆå€¼ï¼‰
- `high_thresh`: 0.7ï¼ˆé«˜ç½®ä¿¡åº¦é˜ˆå€¼ï¼‰
- `match_thresh`: 0.7ï¼ˆIoUåŒ¹é…é˜ˆå€¼ï¼‰
- `track_buffer`: 50ï¼ˆè·Ÿè¸ªç¼“å†²åŒºï¼‰

**æ€§èƒ½ä¼˜åŒ–**:
- å‘é‡åŒ–IoUè®¡ç®—ï¼ˆNumPyï¼‰
- åŒˆç‰™åˆ©ç®—æ³•åŒ¹é…ï¼ˆscipyï¼‰
- æ‰¹é‡å¤„ç†

### 3. BLEä¿¡æ ‡åŒ¹é…æ¨¡å—

**æŠ€æœ¯æ ˆ**: Cassia X1000/X2000 + æ™ºèƒ½è¿‡æ»¤å™¨

**åŠŸèƒ½**:
- å®æ—¶æ‰«æBLEä¿¡æ ‡
- RSSIåˆ°è·ç¦»è½¬æ¢
- å¤šçº§è¿‡æ»¤ï¼ˆRSSIã€è·ç¦»ã€æ—¶é—´çª—å£ï¼‰
- ç½®ä¿¡åº¦è®¡ç®—
- æœ€ä½³åŒ¹é…é€‰æ‹©

**è¿‡æ»¤ç­–ç•¥**:
1. **RSSIè¿‡æ»¤**: ä¿¡å·å¼ºåº¦é˜ˆå€¼ï¼ˆé»˜è®¤-70dBmï¼‰
2. **è·ç¦»åŒ¹é…**: æ·±åº¦ç›¸æœºè·ç¦» vs RSSIè·ç¦»ï¼ˆå®¹å¿åº¦3ç±³ï¼‰
3. **æ—¶é—´çª—å£**: ä¿¡æ ‡éœ€æŒç»­å‡ºç°3ç§’ä»¥ä¸Š
4. **ç½®ä¿¡åº¦è®¡ç®—**: ç»¼åˆRSSIã€è·ç¦»ã€æŒç»­æ—¶é—´

**ç™½åå•ç®¡ç†**:
- YAMLæ ¼å¼é…ç½®
- æ”¯æŒå¤šæ‘„åƒå¤´åŒºåŸŸ
- MACåœ°å€ + è½¦è¾†ç±»å‹ç»‘å®š

### 4. è½¦ç‰Œè¯†åˆ«æ¨¡å—

**æŠ€æœ¯æ ˆ**: HyperLPR3

**åŠŸèƒ½**:
- ç¤¾ä¼šè½¦è¾†è½¦ç‰Œè¯†åˆ«
- å¤šæ ¼å¼ç»“æœå¤„ç†ï¼ˆå­—ç¬¦ä¸²ã€Plateå¯¹è±¡ã€å­—å…¸ã€åˆ—è¡¨ï¼‰
- å›¾åƒé¢„å¤„ç†ä¼˜åŒ–

**é¢„å¤„ç†æµç¨‹**:
1. **å°ºå¯¸è°ƒæ•´**: æœ€å°120Ã—320åƒç´ ï¼Œæœ€å¤§400Ã—1000åƒç´ 
2. **å»å™ª**: åŒè¾¹æ»¤æ³¢
3. **é”åŒ–**: å·ç§¯æ ¸å¢å¼ºè¾¹ç¼˜
4. **å¯¹æ¯”åº¦å¢å¼º**: CLAHEï¼ˆclipLimit=3.0ï¼‰

**æ€§èƒ½ä¼˜åŒ–**:
- ä½¿ç”¨INTER_CUBICæ’å€¼
- è‡ªé€‚åº”å°ºå¯¸è°ƒæ•´
- å¤šæ ¼å¼ç»“æœå…¼å®¹

### 5. æ·±åº¦æµ‹é‡æ¨¡å—

**æŠ€æœ¯æ ˆ**: Orbbec Gemini 335L

**åŠŸèƒ½**:
- RGB + æ·±åº¦åŒæ­¥é‡‡é›†
- è½¦è¾†ROIæ·±åº¦æµ‹é‡
- æ— æ•ˆå€¼è¿‡æ»¤
- å¤šç§æµ‹é‡æ–¹æ³•ï¼ˆmedian/mean/minï¼‰

**æµ‹é‡æ–¹æ³•**:
- `median`: ä¸­ä½æ•°ï¼ˆé»˜è®¤ï¼ŒæŠ—å™ªï¼‰
- `mean`: å¹³å‡å€¼
- `min`: æœ€å°å€¼ï¼ˆæœ€è¿‘è·ç¦»ï¼‰

**å‚æ•°**:
- `min_range`: 0.1ç±³
- `max_range`: 10.0ç±³
- `invalid_min`: 0æ¯«ç±³
- `invalid_max`: 65535æ¯«ç±³

### 6. è§†é¢‘å½•åˆ¶æ¨¡å—

**æŠ€æœ¯æ ˆ**: OpenCV VideoWriter + å…±äº«ç¼“å†²åŒº

**åŠŸèƒ½**:
- RGBè§†é¢‘å½•åˆ¶
- æ·±åº¦è§†é¢‘å½•åˆ¶ï¼ˆä¼ªå½©è‰²ï¼‰
- å…ƒæ•°æ®è®°å½•ï¼ˆJSONï¼‰
- åŒæ­¥å½•åˆ¶ï¼ˆä¸»ç¨‹åºç‹¬å ç›¸æœºï¼‰

**å…±äº«æœºåˆ¶**:
- ä¸»ç¨‹åºä¿å­˜å¸§åˆ°`.npy`æ–‡ä»¶
- å½•åˆ¶è„šæœ¬è¯»å–å…±äº«å¸§
- è·¯å¾„: `/tmp/orbbec_shared_frame.npy`, `/tmp/orbbec_shared_depth.npy`

**è¾“å‡ºæ ¼å¼**:
- RGB: MP4 (H.264)
- æ·±åº¦: MP4 (ä¼ªå½©è‰²)
- å…ƒæ•°æ®: JSON

---

## å¼€å‘è¿›åº¦

### âœ… å·²å®ŒæˆåŠŸèƒ½

1. **æ ¸å¿ƒæ£€æµ‹ç³»ç»Ÿ**
   - [x] TensorRTæ¨ç†å¼•æ“é›†æˆ
   - [x] YOLOv11æ¨¡å‹è½¬æ¢å’Œä¼˜åŒ–
   - [x] å®æ—¶æ£€æµ‹æµç¨‹
   - [x] NMSåå¤„ç†
   - [x] é¢å¤–IoUè¿‡æ»¤

2. **ç›®æ ‡è·Ÿè¸ª**
   - [x] Simple IoUè·Ÿè¸ªå™¨
   - [x] ByteTracké›†æˆ
   - [x] è·Ÿè¸ªå‚æ•°ä¼˜åŒ–
   - [x] æ€§èƒ½ä¼˜åŒ–ï¼ˆå‘é‡åŒ–ã€åŒˆç‰™åˆ©ç®—æ³•ï¼‰

3. **BLEä¿¡æ ‡ç³»ç»Ÿ**
   - [x] Cassiaæœ¬åœ°å®¢æˆ·ç«¯
   - [x] SSEæµå¼æ‰«æ
   - [x] ä¿¡æ ‡æ™ºèƒ½è¿‡æ»¤å™¨
   - [x] å¤šçº§è¿‡æ»¤ç­–ç•¥
   - [x] ç™½åå•ç®¡ç†
   - [x] è½¦è¾†ç±»å‹åŒ¹é…

4. **æ·±åº¦æµ‹é‡**
   - [x] Orbbecç›¸æœºé›†æˆ
   - [x] RGB + æ·±åº¦åŒæ­¥é‡‡é›†
   - [x] æ·±åº¦å€¼è½¬æ¢å’Œè¿‡æ»¤
   - [x] å¤šç§æµ‹é‡æ–¹æ³•

5. **è½¦ç‰Œè¯†åˆ«**
   - [x] HyperLPR3é›†æˆ
   - [x] å›¾åƒé¢„å¤„ç†ä¼˜åŒ–
   - [x] å¤šæ ¼å¼ç»“æœå¤„ç†
   - [x] åˆ†è¾¨ç‡ä¼˜åŒ–

6. **é…ç½®ç®¡ç†**
   - [x] ç»Ÿä¸€YAMLé…ç½®
   - [x] é…ç½®åŠ è½½å™¨
   - [x] å‘½ä»¤è¡Œå‚æ•°è¦†ç›–
   - [x] è·¯å¾„è§£æ

7. **è§†é¢‘å½•åˆ¶**
   - [x] åŒæ­¥å½•åˆ¶æœºåˆ¶
   - [x] å…±äº«ç¼“å†²åŒº
   - [x] RGB + æ·±åº¦å½•åˆ¶
   - [x] å…ƒæ•°æ®è®°å½•

8. **ç³»ç»Ÿä¼˜åŒ–**
   - [x] æ£€æµ‹æ¡†é—ªçƒé—®é¢˜ä¿®å¤
   - [x] Cassiaå¯åŠ¨å»¶è¿Ÿå¤„ç†
   - [x] è½¦ç‰Œè¯†åˆ«æ€§èƒ½ä¼˜åŒ–
   - [x] æ— å¤´æ¨¡å¼æ”¯æŒ

### ğŸ”§ å¼€å‘ä¸­åŠŸèƒ½

1. **æ—¥å¿—ç³»ç»Ÿ**
   - [ ] ç»“æ„åŒ–æ—¥å¿—è¾“å‡º
   - [ ] æ—¥å¿—è½®è½¬
   - [ ] æ—¥å¿—çº§åˆ«ç®¡ç†

2. **é”™è¯¯æ¢å¤**
   - [ ] ç›¸æœºè‡ªåŠ¨é‡è¿
   - [ ] Cassiaè‡ªåŠ¨é‡è¿
   - [ ] ä¼˜é›…é™çº§

3. **æ€§èƒ½ç›‘æ§**
   - [ ] FPSç›‘æ§
   - [ ] GPUä½¿ç”¨ç‡
   - [ ] å†…å­˜ä½¿ç”¨
   - [ ] å»¶è¿Ÿç»Ÿè®¡

4. **æ•°æ®æŒä¹…åŒ–**
   - [ ] æŠ¥è­¦è®°å½•ï¼ˆJSONï¼‰
   - [ ] ç»Ÿè®¡æŠ¥å‘Š
   - [ ] æ•°æ®å¯¼å‡º

### ğŸ“‹ å¾…å®ç°åŠŸèƒ½

1. **é«˜çº§åŠŸèƒ½**
   - [ ] å¤šæ‘„åƒå¤´æ”¯æŒ
   - [ ] äº‘ç«¯æ•°æ®åŒæ­¥
   - [ ] Webç®¡ç†ç•Œé¢
   - [ ] ç§»åŠ¨ç«¯APP

2. **ç®—æ³•ä¼˜åŒ–**
   - [ ] å¤šå¸§èåˆ
   - [ ] æ›´å…ˆè¿›çš„è·Ÿè¸ªç®—æ³•
   - [ ] è½¦ç‰Œè¯†åˆ«æ¨¡å‹ä¼˜åŒ–

---

## é…ç½®æ–‡ä»¶è¯´æ˜

### 1. `config.yaml` (ä¸»é…ç½®æ–‡ä»¶)

```yaml
# ç½‘ç»œé…ç½®
network:
  cassia_ip: "192.168.1.2"
  camera_id: "camera_01"

# æ£€æµ‹å‚æ•°
detection:
  conf_threshold: 0.7
  iou_threshold: 0.5
  model_path: "models/custom_yolo.engine"

# è·Ÿè¸ªå‚æ•°
tracking:
  tracker_type: "bytetrack"  # "simple_iou" æˆ– "bytetrack"
  track_thresh: 0.6
  high_thresh: 0.7
  match_thresh: 0.7
  track_buffer: 50

# æ·±åº¦æµ‹é‡å‚æ•°
depth:
  min_range: 0.1
  max_range: 10.0
  method: "median"

# æ—¥å¿—é…ç½®
logging:
  level: "INFO"
  file_enabled: true
  max_file_size_mb: 10
  backup_count: 5

# æ€§èƒ½ç›‘æ§
performance:
  monitor_enabled: true
  fps_update_interval: 10

# é”™è¯¯æ¢å¤
recovery:
  camera_retry_enabled: true
  camera_retry_interval: 5.0
  cassia_retry_enabled: true
  cassia_retry_interval: 3.0
```

### 2. `beacon_whitelist.yaml` (ä¿¡æ ‡ç™½åå•)

```yaml
global_config:
  rssi_thresholds:
    default: -70
  distance_match:
    tolerance: 3.0
  time_window:
    min_duration: 3.0

cameras:
  camera_01:
    beacons:
      - mac: "45:C6:6A:F2:46:19"
        vehicle_type: "excavator"
        plate_number: "äº¬A12345"
        company: "XXå»ºç­‘å…¬å¸"
```

---

## ä½¿ç”¨æŒ‡å—

### å¿«é€Ÿå¼€å§‹

#### 1. ç¯å¢ƒå‡†å¤‡

```bash
# å®‰è£…ä¾èµ–
pip install numpy opencv-python tensorrt pycuda aiohttp aiohttp-sse-client pyyaml hyperlpr3

# å®‰è£…Orbbec SDK
# å‚è€ƒ: orbbec_camera_guide.md
```

#### 2. é…ç½®è®¾ç½®

```bash
# ç¼–è¾‘é…ç½®æ–‡ä»¶
vim config.yaml

# è®¾ç½®Cassia IP
vim config.yaml  # ä¿®æ”¹ network.cassia_ip

# é…ç½®ä¿¡æ ‡ç™½åå•
vim beacon_whitelist.yaml
```

#### 3. å¯åŠ¨ç³»ç»Ÿ

**å¸¦æ˜¾ç¤ºæ¨¡å¼**ï¼ˆç°åœºæµ‹è¯•ï¼‰:
```bash
./start_field_test_display.sh
```

**æ— å¤´æ¨¡å¼ + å½•åˆ¶**ï¼ˆç°åœºæµ‹è¯•ï¼‰:
```bash
./start_field_test_with_recording.sh
```

**å®éªŒå®¤æµ‹è¯•**:
```bash
./test_realtime_system.sh
```

### å‘½ä»¤è¡Œå‚æ•°

```bash
python3 test_system_realtime.py \
    --config config.yaml \
    --engine models/custom_yolo.engine \
    --cassia-ip 192.168.1.2 \
    --camera-id camera_01 \
    --no-display  # æ— å¤´æ¨¡å¼
```

### æµ‹è¯•è„šæœ¬

- `check_cassia.sh`: æ£€æŸ¥Cassiaè¿æ¥å’Œæ‰«æ
- `fix_cassia_connection.sh`: ä¿®å¤Cassiaç½‘ç»œè¿æ¥
- `test_realtime_system.sh`: å®éªŒå®¤æµ‹è¯•
- `start_field_test_display.sh`: ç°åœºæµ‹è¯•ï¼ˆå¸¦æ˜¾ç¤ºï¼‰
- `start_field_test_with_recording.sh`: ç°åœºæµ‹è¯•ï¼ˆå½•åˆ¶ï¼‰

---

## æŠ€æœ¯æ ˆ

### æ·±åº¦å­¦ä¹ 
- **æ¡†æ¶**: YOLOv11
- **æ¨ç†å¼•æ“**: TensorRT (FP16)
- **æ¨¡å‹**: è‡ªå®šä¹‰10ç±»è½¦è¾†æ£€æµ‹æ¨¡å‹

### è®¡ç®—æœºè§†è§‰
- **è·Ÿè¸ªç®—æ³•**: ByteTrack / Simple IoU
- **è½¦ç‰Œè¯†åˆ«**: HyperLPR3
- **å›¾åƒå¤„ç†**: OpenCV

### ç¡¬ä»¶æ¥å£
- **æ·±åº¦ç›¸æœº**: Orbbec Gemini 335L (PyOrbbecSDK)
- **è“ç‰™è·¯ç”±å™¨**: Cassia X1000/X2000 (HTTP API + SSE)

### ç³»ç»Ÿæ¡†æ¶
- **è¯­è¨€**: Python 3.8+
- **å¼‚æ­¥IO**: asyncio, aiohttp
- **é…ç½®ç®¡ç†**: PyYAML
- **æ•°å€¼è®¡ç®—**: NumPy
- **GPUåŠ é€Ÿ**: PyCUDA, TensorRT

### å¼€å‘å·¥å…·
- **ç‰ˆæœ¬æ§åˆ¶**: Git
- **æ–‡æ¡£**: Markdown
- **æµ‹è¯•**: Shellè„šæœ¬

---

## å·²çŸ¥é—®é¢˜ä¸ä¼˜åŒ–æ–¹å‘

### å·²è§£å†³é—®é¢˜ âœ…

1. **æ£€æµ‹æ¡†é—ªçƒ**
   - **åŸå› **: æ£€æµ‹é˜ˆå€¼è¿‡ä½ï¼Œè·Ÿè¸ªå‚æ•°ä¸ç¨³å®š
   - **è§£å†³**: æå‡æ£€æµ‹é˜ˆå€¼åˆ°0.7ï¼Œä¼˜åŒ–è·Ÿè¸ªå‚æ•°
   - **çŠ¶æ€**: å·²ä¿®å¤

2. **Cassiaå¯åŠ¨å»¶è¿Ÿè¯¯æŠ¥**
   - **åŸå› **: Cassiaå®¢æˆ·ç«¯å¯åŠ¨åéœ€è¦æ—¶é—´å»ºç«‹è¿æ¥
   - **è§£å†³**: æ·»åŠ 3ç§’å¯åŠ¨ç­‰å¾…æ—¶é—´
   - **çŠ¶æ€**: å·²ä¿®å¤

3. **è½¦ç‰Œè¯†åˆ«æ€§èƒ½å·®**
   - **åŸå› **: è¾“å…¥åˆ†è¾¨ç‡è¿‡ä½ï¼Œé¢„å¤„ç†ä¸è¶³
   - **è§£å†³**: æå‡æœ€å°å°ºå¯¸åˆ°120Ã—320ï¼Œå¢å¼ºé¢„å¤„ç†
   - **çŠ¶æ€**: å·²ä¼˜åŒ–

### å¾…ä¼˜åŒ–é—®é¢˜ âš ï¸

1. **æ£€æµ‹ç¨³å®šæ€§**
   - **é—®é¢˜**: å¤æ‚åœºæ™¯ä¸‹ä»æœ‰å°‘é‡è¯¯æ£€
   - **æ–¹å‘**: å¤šå¸§èåˆã€æ¨¡å‹é‡è®­ç»ƒ

2. **è½¦ç‰Œè¯†åˆ«å‡†ç¡®ç‡**
   - **é—®é¢˜**: è¿œè·ç¦»ã€ä½å…‰ç…§æ¡ä»¶ä¸‹è¯†åˆ«ç‡ä½
   - **æ–¹å‘**: æ›´å…ˆè¿›çš„è¯†åˆ«æ¨¡å‹ã€å¤šè§’åº¦èåˆ

3. **ç³»ç»Ÿæ€§èƒ½**
   - **é—®é¢˜**: FPSæ³¢åŠ¨ï¼ŒGPUåˆ©ç”¨ç‡ä¸ç¨³å®š
   - **æ–¹å‘**: æµæ°´çº¿ä¼˜åŒ–ã€å¼‚æ­¥å¤„ç†

4. **é”™è¯¯æ¢å¤**
   - **é—®é¢˜**: ç›¸æœº/Cassiaæ–­çº¿åéœ€æ‰‹åŠ¨é‡å¯
   - **æ–¹å‘**: è‡ªåŠ¨é‡è¿æœºåˆ¶ï¼ˆå·²è§„åˆ’ï¼‰

### æœªæ¥ä¼˜åŒ–æ–¹å‘ ğŸš€

1. **ç®—æ³•ä¼˜åŒ–**
   - å¤šå¸§èåˆæé«˜æ£€æµ‹ç¨³å®šæ€§
   - æ›´å…ˆè¿›çš„è·Ÿè¸ªç®—æ³•ï¼ˆDeepSORTã€FairMOTï¼‰
   - è½¦ç‰Œè¯†åˆ«æ¨¡å‹ä¼˜åŒ–ï¼ˆPP-OCRã€PaddleOCRï¼‰

2. **ç³»ç»Ÿæ¶æ„**
   - å¤šæ‘„åƒå¤´æ”¯æŒ
   - åˆ†å¸ƒå¼å¤„ç†
   - äº‘ç«¯æ•°æ®åŒæ­¥

3. **ç”¨æˆ·ä½“éªŒ**
   - Webç®¡ç†ç•Œé¢
   - ç§»åŠ¨ç«¯APP
   - å®æ—¶ç›‘æ§å¤§å±

4. **æ€§èƒ½ä¼˜åŒ–**
   - æ¨¡å‹é‡åŒ–ï¼ˆINT8ï¼‰
   - æµæ°´çº¿å¹¶è¡Œ
   - å†…å­˜ä¼˜åŒ–

---

## æµ‹è¯•ä¸éªŒè¯

### æµ‹è¯•ç¯å¢ƒ

- **ç¡¬ä»¶**: NVIDIA Jetson + Orbbec Gemini 335L + Cassia X1000
- **è½¯ä»¶**: Ubuntu 20.04, Python 3.8, TensorRT 8.x
- **ç½‘ç»œ**: æœ‰çº¿è¿æ¥ï¼ˆenP8p1s0: 192.168.1.3ï¼‰

### æµ‹è¯•åœºæ™¯

1. **å®éªŒå®¤æµ‹è¯•**
   - é™æ€å›¾åƒæµ‹è¯•
   - è§†é¢‘å›æ”¾æµ‹è¯•
   - æ¨¡æ‹Ÿä¿¡æ ‡æµ‹è¯•

2. **ç°åœºæµ‹è¯•**
   - çœŸå®è½¦è¾†æ£€æµ‹
   - çœŸå®BLEä¿¡æ ‡åŒ¹é…
   - ä¸åŒå…‰ç…§æ¡ä»¶
   - ä¸åŒè·ç¦»èŒƒå›´

### æ€§èƒ½æŒ‡æ ‡

**å½“å‰å®æµ‹æ€§èƒ½** (1080p, å…¨åŠŸèƒ½æ¨¡å¼):
- **æ£€æµ‹é€Ÿåº¦**: 15-25 FPS
- **æ£€æµ‹ç²¾åº¦**: mAP@0.5 > 0.85
- **è·Ÿè¸ªç¨³å®šæ€§**: IDåˆ‡æ¢ç‡ < 5%
- **ä¿¡æ ‡åŒ¹é…**: å‡†ç¡®ç‡ > 95%
- **è½¦ç‰Œè¯†åˆ«**: è§¦å‘ç‡ > 60%, å‡†ç¡®ç‡ > 70%

**ç›®æ ‡æ€§èƒ½** (720p, æ€§èƒ½æ¨¡å¼):
- **æ£€æµ‹é€Ÿåº¦**: 50+ FPS
- å…¶ä»–æŒ‡æ ‡ä¿æŒä¸å˜

### æµ‹è¯•è„šæœ¬

```bash
# æ£€æŸ¥Cassiaè¿æ¥
./check_cassia.sh

# æµ‹è¯•å®æ—¶ç³»ç»Ÿ
./test_realtime_system.sh

# ç°åœºæµ‹è¯•ï¼ˆå¸¦æ˜¾ç¤ºï¼‰
./start_field_test_display.sh

# ç°åœºæµ‹è¯•ï¼ˆå½•åˆ¶ï¼‰
./start_field_test_with_recording.sh
```

---

## ç‰ˆæœ¬å†å²

### v1.0.0 (2025-11-21)
- âœ… æ ¸å¿ƒæ£€æµ‹ç³»ç»Ÿå®Œæˆ
- âœ… ByteTrackè·Ÿè¸ªé›†æˆ
- âœ… BLEä¿¡æ ‡åŒ¹é…ç³»ç»Ÿ
- âœ… è½¦ç‰Œè¯†åˆ«ä¼˜åŒ–
- âœ… è§†é¢‘å½•åˆ¶åŠŸèƒ½
- âœ… é…ç½®ç®¡ç†ç³»ç»Ÿ
- âœ… ç°åœºæµ‹è¯•ä¼˜åŒ–

### æœªæ¥ç‰ˆæœ¬è§„åˆ’
- v1.1.0: æ—¥å¿—ç³»ç»Ÿå’Œé”™è¯¯æ¢å¤
- v1.2.0: æ€§èƒ½ç›‘æ§å’Œæ•°æ®æŒä¹…åŒ–
- v2.0.0: å¤šæ‘„åƒå¤´æ”¯æŒå’Œäº‘ç«¯åŒæ­¥

---

## è´¡çŒ®ä¸æ”¯æŒ

### å¼€å‘è€…
- **SolidRusT Networks**
- **å¼€å‘ç¯å¢ƒ**: Cursor IDE + AI Assistant

### æ–‡æ¡£ç»´æŠ¤
- æœ¬æ–‡æ¡£éšé¡¹ç›®è¿›å±•æŒç»­æ›´æ–°
- å…³é”®å˜æ›´è®°å½•åœ¨ `field_test_optimization_summary.md`

### é—®é¢˜åé¦ˆ
- è®°å½•åœ¨é¡¹ç›®æ–‡æ¡£ä¸­
- ä¼˜åŒ–æ–¹å‘è§"å·²çŸ¥é—®é¢˜ä¸ä¼˜åŒ–æ–¹å‘"ç« èŠ‚

---

## é™„å½•

### ç›¸å…³æ–‡æ¡£
- `field_test_optimization_summary.md`: ç°åœºæµ‹è¯•ä¼˜åŒ–æ€»ç»“
- `beacon_whitelist_guide.md`: ä¿¡æ ‡ç™½åå•é…ç½®æŒ‡å—
- `orbbec_camera_guide.md`: Orbbecç›¸æœºä½¿ç”¨æŒ‡å—
- `cassia_troubleshooting.md`: Cassiaæ•…éšœæ’é™¤

### å‚è€ƒèµ„æº
- YOLOv11: https://github.com/ultralytics/ultralytics
- ByteTrack: https://github.com/ifzhang/ByteTrack
- HyperLPR3: https://github.com/szad670401/HyperLPR
- TensorRT: https://developer.nvidia.com/tensorrt
- Orbbec SDK: https://orbbec3d.com/

---

**æ–‡æ¡£æœ€åæ›´æ–°**: 2025-11-21  
**é¡¹ç›®çŠ¶æ€**: ç°åœºæµ‹è¯•é˜¶æ®µ  
**ç»´æŠ¤è€…**: SolidRusT Networks
